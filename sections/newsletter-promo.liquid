{% schema %}
{
  "name": "Newsletter Promo",
  "tag": "section",
  "class": "section-newsletter-promo",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Ancho completo",
      "default": false,
      "info": "Si se activa, la sección ocupará todo el ancho de la pantalla"
    },
    {
      "type": "range",
      "id": "section_height_desktop",
      "label": "Altura de la sección (Escritorio)",
      "min": 300,
      "max": 900,
      "step": 50,
      "unit": "px",
      "default": 500
    },
    {
      "type": "range",
      "id": "section_height_mobile",
      "label": "Altura de la sección (Mobile)",
      "min": 400,
      "max": 800,
      "step": 50,
      "unit": "px",
      "default": 600,
      "info": "En mobile la imagen y contenido se apilan verticalmente"
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Imagen"
    },
    {
      "type": "select",
      "id": "image_position_vertical",
      "label": "Posición vertical de la imagen",
      "options": [
        { "value": "top", "label": "Superior" },
        { "value": "center", "label": "Centro" },
        { "value": "bottom", "label": "Inferior" }
      ],
      "default": "center",
      "info": "Define qué parte de la imagen se muestra cuando se recorta"
    },
    {
      "type": "select",
      "id": "image_position_horizontal",
      "label": "Posición horizontal de la imagen",
      "options": [
        { "value": "left", "label": "Izquierda" },
        { "value": "center", "label": "Centro" },
        { "value": "right", "label": "Derecha" }
      ],
      "default": "center",
      "info": "Define qué parte de la imagen se muestra cuando se recorta"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Posición del lado de la imagen (Escritorio)",
      "options": [
        { "value": "left", "label": "Izquierda" },
        { "value": "right", "label": "Derecha" }
      ],
      "default": "left"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Título",
      "default": "¡Aprovecha un 25% de descuento al registrarte en nuestra Newsletter!"
    },
    {
      "type": "textarea",
      "id": "subtext",
      "label": "Texto",
      "default": "Obtén un 25% de descuento en tu primera compra y sé el primero en conocer nuestros eventos, contenido exclusivo y precios especiales."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Texto del botón",
      "default": "SUSCRIBIRME"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "URL del botón"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Color de fondo del contenido",
      "default": "#f3eee3"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Color del texto",
      "default": "#0b0b0b"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Color de fondo del botón",
      "default": "#0b0b0b"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Color del texto del botón",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "label": "Espaciado superior",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "label": "Espaciado inferior",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Newsletter Promo"
    }
  ]
}
{% endschema %}

{% style %}
  .newsletter-promo-{{ section.id }} {
    padding-top: {{ section.settings.section_padding_top }}px;
    padding-bottom: {{ section.settings.section_padding_bottom }}px;
  }

  .newsletter-promo-{{ section.id }} .newsletter-promo__container {
    height: {{ section.settings.section_height_desktop }}px;
    {% unless section.settings.full_width %}
      max-width: 1400px;
    {% endunless %}
  }

  .newsletter-promo-{{ section.id }} .newsletter-promo__image {
    object-position: {{ section.settings.image_position_horizontal }} {{ section.settings.image_position_vertical }};
  }

  .newsletter-promo-{{ section.id }} .newsletter-promo__content {
    background-color: {{ section.settings.bg_color }};
    color: {{ section.settings.text_color }};
  }

  .newsletter-promo-{{ section.id }} .newsletter-promo__button {
    background-color: {{ section.settings.button_bg_color }};
    color: {{ section.settings.button_text_color }};
  }

  .newsletter-promo-{{ section.id }} .newsletter-promo__button:hover {
    opacity: 0.85;
    transform: translateY(-1px);
  }

  @media screen and (max-width: 767px) {
    .newsletter-promo-{{ section.id }} .newsletter-promo__container {
      height: {{ section.settings.section_height_mobile }}px;
    }
  }
{% endstyle %}

{% stylesheet %}
  /* ==========================================================================
     Newsletter Promo Section
     ========================================================================== */

  .newsletter-promo {
    width: 100%;
    overflow: hidden;
  }

  .newsletter-promo__container {
    width: 100%;
    margin: 0 auto;
    display: flex;
    align-items: stretch;
  }

  /* Image Side
     ========================================================================== */

  .newsletter-promo__image-wrapper {
    flex: 1 1 50%;
    position: relative;
    overflow: hidden;
  }

  .newsletter-promo__image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .newsletter-promo__image-placeholder {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #999;
    font-size: 14px;
  }

  /* Content Side
     ========================================================================== */

  .newsletter-promo__content {
    flex: 1 1 50%;
    padding: 60px 72px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    box-sizing: border-box;
    overflow-y: auto;
  }

  .newsletter-promo__heading {
    margin: 0 0 16px;
    font-weight: 700;
    font-size: 24px;
    line-height: 1.3;
    letter-spacing: -0.02em;
  }

  .newsletter-promo__subtext {
    margin: 0 0 28px;
    font-size: 15px;
    line-height: 1.6;
    max-width: 540px;
    opacity: 0.9;
  }

  .newsletter-promo__button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 32px;
    text-decoration: none;
    font-weight: 600;
    font-size: 13px;
    line-height: 1;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    border-radius: 2px;
    border: none;
    cursor: pointer;
    transition: all 0.25s ease;
    width: fit-content;
  }

  /* Layout Variations
     ========================================================================== */

  .newsletter-promo--image-right .newsletter-promo__image-wrapper {
    order: 2;
  }

  .newsletter-promo--image-right .newsletter-promo__content {
    order: 1;
  }

  /* Tablet
     ========================================================================== */

  @media screen and (max-width: 989px) {
    .newsletter-promo__content {
      padding: 48px 40px;
    }

    .newsletter-promo__heading {
      font-size: 20px;
    }

    .newsletter-promo__subtext {
      font-size: 14px;
    }
  }

  /* Mobile
     ========================================================================== */

  @media screen and (max-width: 767px) {
    .newsletter-promo__container {
      flex-direction: column;
    }

    .newsletter-promo__image-wrapper {
      order: 1;
      flex: 0 0 50%;
    }

    .newsletter-promo__content {
      order: 0;
      flex: 0 0 50%;
      padding: 32px 24px;
    }

    .newsletter-promo__heading {
      font-size: 18px;
      margin-bottom: 12px;
    }

    .newsletter-promo__subtext {
      font-size: 14px;
      margin-bottom: 24px;
    }

    .newsletter-promo__button {
      width: 100%;
      padding: 16px 24px;
    }

    /* Siempre mostrar imagen debajo en mobile */
    .newsletter-promo--image-right .newsletter-promo__image-wrapper,
    .newsletter-promo--image-left .newsletter-promo__image-wrapper {
      order: 1;
    }

    .newsletter-promo--image-right .newsletter-promo__content,
    .newsletter-promo--image-left .newsletter-promo__content {
      order: 0;
    }
  }

  /* Small Mobile
     ========================================================================== */

  @media screen and (max-width: 479px) {
    .newsletter-promo__content {
      padding: 28px 20px;
    }
  }
{% endstylesheet %}

<section 
  class="newsletter-promo newsletter-promo-{{ section.id }} {% if section.settings.image_position == 'right' %}newsletter-promo--image-right{% endif %}"
  role="region"
  aria-label="{{ section.settings.heading | escape }}">
  
  <div class="newsletter-promo__container">
    
    {%- comment -%} Image Side {%- endcomment -%}
    <div class="newsletter-promo__image-wrapper">
      {%- if section.settings.hero_image != blank -%}
        {{
          section.settings.hero_image
          | image_url: width: 1600
          | image_tag:
            loading: 'lazy',
            class: 'newsletter-promo__image',
            alt: section.settings.hero_image.alt | default: section.settings.heading,
            widths: '375, 550, 750, 1000, 1200, 1600',
            sizes: '(min-width: 768px) 50vw, 100vw'
        }}
      {%- else -%}
        <div class="newsletter-promo__image-placeholder">
          {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
        </div>
      {%- endif -%}
    </div>

    {%- comment -%} Content Side {%- endcomment -%}
    <div class="newsletter-promo__content">
      {%- if section.settings.heading != blank -%}
        <h2 class="newsletter-promo__heading">
          {{ section.settings.heading }}
        </h2>
      {%- endif -%}

      {%- if section.settings.subtext != blank -%}
        <div class="newsletter-promo__subtext">
          {{ section.settings.subtext }}
        </div>
      {%- endif -%}

      {%- if section.settings.button_text != blank -%}
        <a 
          href="{{ section.settings.button_url | default: '#' }}" 
          class="newsletter-promo__button"
          {% if section.settings.button_url == blank %}aria-disabled="true"{% endif %}>
          {{ section.settings.button_text }}
        </a>
      {%- endif -%}
    </div>

  </div>
</section>